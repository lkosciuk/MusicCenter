@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script>

  // When the browser is ready...
    $(document).ready((function() {

        // Setup form validation on the #register-form element
        $("#register-form").validate({

            errorClass: "text-danger",

            // Specify the validation rules
            rules: {
                email: {
                    required: true,
                    email: true
                },
                password: {
                    required: true,
                    minlength: 5
                },
                password_confirm: {
                    equalTo: "#password"
                }

            },

            // Specify the validation error messages
            messages: {
                password: {
                    required: "Password is required",
                    minlength: "Password is too short"
                },
                email: { 
                    email: "Please enter a valid email address",
                    required: "Email is required"
                },
                password_confirm: "Password not match"
            },

        });

        $('#register-form input').on('keyup blur', function () {
            if ($('#register-form').valid()) {
                $('#registerBtn').prop('disabled', false);
            } else {
                $('#registerBtn').prop('disabled', 'disabled');
            }
        });

        changeUserAvatar = function (input) {
            var ext = input.files[0]['name'].substring(input.files[0]['name'].lastIndexOf('.') + 1).toLowerCase();
            if (input.files && input.files[0] && (ext == "gif" || ext == "png" || ext == "jpeg" || ext == "jpg")) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#userAvatar').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            } else {
                $('#userAvatar').attr('src', '/Content/Uploads/DefaultUserAv.jpg');
            }
        }

    }));

</script>

<div class="container text-center" style="margin-top:5%">
    <form action='' method="POST" style="display:inline-block;" id="register-form" novalidate="novalidate" >
        <fieldset>
            <div id="legend">
                <legend class="">Register</legend>
            </div>
            <div class="control-group">
                <img src="~/Content/Uploads/DefaultUserAv.jpg" alt="..." class="img-thumbnail" style="display:block;margin-left:auto;margin-right:auto;" width="200" height="200" id="userAvatar">
                <input type="file" value="Browse" style="margin-top:2%" onchange="changeUserAvatar(this)"/>
            </div>
            <div class="control-group">
                <!-- E-mail -->
                <label class="control-label" for="email">E-mail</label>
                <div class="controls">
                    <input type="text" id="email" name="email" placeholder="" class="form-control">
                    <p class="help-block">Please provide your E-mail</p>
                </div>
            </div>

            <div class="control-group">
                <!-- Password-->
                <label class="control-label" for="password">Password</label>
                <div class="controls">
                    <input type="password" id="password" name="password" placeholder="" class="form-control">
                    <p class="help-block">Password should be at least 5 characters</p>
                </div>
            </div>

            <div class="control-group">
                <!-- Password -->
                <label class="control-label" for="password_confirm">Password (Confirm)</label>
                <div class="controls">
                    <input type="password" id="password_confirm" name="password_confirm" placeholder="" class="form-control">
                    <p class="help-block">Please confirm password</p>
                </div>
            </div>

            <div class="control-group">
                <!-- Button -->
                <div class="controls">
                    <button id="registerBtn" type="submit" class="btn btn-success">Register</button>
                </div>
            </div>
        </fieldset>
    </form>
</div>


@*<form id="myform">
    <label for="password">Password</label>
    <input id="password" name="password" />
    <br />
    <label for="password_again">Again</label>
    <input class="left" id="password_again" name="password_again" />
    <br>
    <input type="submit" value="Validate!">
</form>


<script>
$( "#myform" ).validate({
  rules: {
    password: "required",
    password_again: {
      equalTo: "#password"
    }
  }
});
</script>*@