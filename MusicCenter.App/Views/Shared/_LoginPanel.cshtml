@model MusicCenter.Common.ViewModels.User.LoginViewModel

<form action="@Url.Action("LogIn", "Account")">
    <ul class="nav navbar-nav navbar-right">
        <li>
            <div class="form-group">
                @Html.TextBoxFor(m => m.Email, new { placeholder = @MusicCenter.Common.Resources.Global.Email, @class="form-control", style="margin-top: 10px; float: right; height:25px; width:120px; margin-right: 10px" })
            </div>
        </li>
        <li>
            <div class="form-group">
                @Html.PasswordFor(m => m.Password, new {placeholder = @MusicCenter.Common.Resources.Global.Password, @class="form-control", style= "margin-top: 10px; float: right; height: 25px; width:120px; margin-right: 10px" })
            </div>
        </li>
        <li>
            <div class="checkbox" style="margin-top:12px; margin-right:10px; color:gray">
                <label>
                    <input type="checkbox"> @MusicCenter.Common.Resources.Global.RememberMe
                </label>
            </div>
        </li>
        <li><button type="submit" class="btn btn-default text-center" style="margin-top:5px; margin-right:10px">@MusicCenter.Common.Resources.Global.SignIn</button></li>
        <li>@Html.ActionLink(MusicCenter.Common.Resources.Global.Register, "Register", "Account", null, new { @class = "navbar-brand col-lg-1" })</li>
        <li><img id="SoundCloudLogo" src="http://connect.soundcloud.com/2/btn-connect-sc-l.png" width="150" style="margin-top: 15px"></li>
    </ul>
</form>

<script>
    function SoundCloudScope() {

        this.Init = function () {
            this.SetupSoundCloud();
            $('#SoundCloudLogo').click(this.ConnectSoundCloud);
        }

        this.SetupSoundCloud = function () {
            var url = 'http://localhost:56536/Account/SoundCloudCallback';
            SC.initialize({
                client_id: '6895e74306f08ac18acb7b703672ee62',
                client_secret: 'b9b5b82f716f3322149d1fa038573e0e',
                redirect_uri: url,
                access_token: sessionStorage['scToken'],
            });
        }

        this.ConnectSoundCloud = function () {
            // initiate authentication popup
            SC.connect(function () {
                // This gets the authenticated user's username
                sessionStorage['scToken'] = SC.accessToken();

                SC.get('/me', function (me) {
                    $.post('@Url.Action("SoundCloudConnect", "Account")', me, function () {
                        window.location.reload();
                    });
                });
               
            });
        }
    }

    $(document).ready((function () {
        var SCScope = new SoundCloudScope();
        SCScope.Init();
    }));
</script>